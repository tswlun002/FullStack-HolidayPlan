<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Reset Password</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
          crossorigin="anonymous">
</head>
<body>
 <div class="container  min-vh-100 col-md-offset-3 col-md-8 mt-lg-5 border border-1 rounded-3"
      style="display: flex; justify-content: center; align-items: center;" >
     <div class="row">
         <div class="col-sm-12" >
             <div class="m-4 align-items-center" >
                 <h3 style="color: rgba(143, 88, 175);" class="text-purple">Reset Password Form</h3>
             </div>
             <div th:if="${param.success}">
                 Password  was changed successfully.
             </div>

         </div>
         <div class="col-sm-12">
             <form th:action="@{reset-password}" method="post" th:object="${passwordResetRequest}" class="px-4">
                 <input type="hidden" name="token" th:field="*{token}" th:value="${token}">
                 <div class="row mb-3  g-3 align-items-center">
                     <label for="inputEmail6" class="col-sm-2 col-form-label">Email</label>
                     <div class="col-sm-8">
                         <input
                                 type="email"
                                 autofocus="autofocus"
                                 required
                                 id="inputEmail6"
                                 class="form-control"
                                 aria-describedby="emailHelpInline"
                                 name="username"
                                 th:field="*{username}"

                         >
                     </div>
                 </div>
                 <div class="row mb-3  g-3 align-items-center">
                     <label for="inputPassword6" class="col-sm-2 col-form-label">Password</label>
                     <div class="col-sm-8">
                         <input
                                 type="password"
                                 autofocus="autofocus"
                                 required
                                 id="inputPassword6"
                                 class="form-control"
                                 aria-describedby="passwordHelpInline"
                                 name="newPassword"
                                 th:field="*{newPassword}"
                         >
                     </div>
                     <div class="col-sm-2">
                        <span id="passwordHelpInline" class="form-text">
                          Minimum 6 characters.
                        </span>
                     </div>
                 </div>

                 <div class="row mb-3 g-3 align-items-center">

                     <label for="inputConfirmPassword6" class="col-sm-2 col-form-label">Confirm Password</label>

                     <div class="col-sm-8">
                         <input
                                 type="password"
                                 autofocus="autofocus"
                                 required
                                 id="inputConfirmPassword6"
                                 class="form-control"
                                 aria-describedby="passwordHelpInline"
                                 name="confirmPassword"
                                 th:field="*{confirmPassword}"
                         >
                     </div>
                     <div class="col-sm-2">
                        <span id="confirmPasswordHelpInline" class="form-text">
                             Minimum 6 characters.
                        </span>
                     </div>
                 </div>
                 <div class="d-grid gap-2 col-8 mx-auto mb-3">
                     <button id="submit_btn" style="background-color: rgba(143, 88, 175); color: #ffffff" class="btn" type="submit">Reset Password</button>
                 </div>
            </form>
         </div>
     </div>

 </div>
<script>
    var password = document.getElementById("inputPassword6");
    var confirm_password = document.getElementById("inputConfirmPassword6");

    function validatePassword(){
        if(password.value != confirm_password.value) {
             confirm_password.setCustomValidity("Passwords Don't Match");
             document.getElementById("submit_btn).disabled=true;
        } else {
                confirm_password.setCustomValidity('');
                document.getElementById("submit_btn).disabled=false;
        }
    }

    password.onchange = validatePassword;
    confirm_password.onkeyup = validatePassword;

</script>
</body>
</html>